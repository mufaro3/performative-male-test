<!DOCTYPE html>
<html>
  <head>
    <title>Your Rice Purity Score</title>
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="style.css">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZW9TZJ46CP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-ZW9TZJ46CP');
    </script>

    <!-- Ads -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3772914411949506" crossorigin="anonymous"></script>
  </head>
  <body>
    <!-- score header -->
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-3772914411949506"
        data-ad-slot="9984291485"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <p>
      <a href="https://ricethresher.org">
        <img src="thresherOfficial.png" alt="Rice Thresher Logo">
      </a>
    </p>

    <p><i>
      The Purity Test has historically served as a segue from O-week to true college life at Rice.<br />
      It's a voluntary opportunity for O-week groups to bond, and for students to track the maturation<br />
      of their experiences throughout college.
    </i></p>
    <p><strong>
      Caution: This is not a bucket list. Completion of all items on this test will likely result in death.
    </strong></p>

    <h2>Your score:</h2>
    <h1 id="score">--</h1>

    <div id="share" style="margin-top: 1em;">
      <button onclick="copyLink()">Copy Link</button>
      <a id="text-share" href="#"><button>Share via Text</button></a>
      <a id="x-share" href="#" target="_blank" rel="noopener noreferrer"><button>Share on X</button></a>
    </div>    

    <p>Thank you for your submission!</p>
    <p>
      The Rice Purity test was created by 
      <a href="https://www.ricethresher.org/" target="_blank">the Rice Thresher</a>
      newspaper at Rice University.
    </p>

    <ins class="adsbygoogle"
        style="display:block"
        data-ad-format="autorelaxed"
        data-ad-client="ca-pub-3772914411949506"
        data-ad-slot="9108525218"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <script>
      const params = new URLSearchParams(window.location.search);
      const score = int(params.get("score")) || sessionStorage.getItem("score");
      if (score) {
        document.getElementById("score").textContent = score;
      }
    </script>

    <script>
      const scoreText = score ? `I got a ${score} on the Rice Purity Test!` : '';
      const shareURL = window.location.origin;

      function copyLink() {
        navigator.clipboard.writeText(shareURL).then(() => {
          alert("Link copied to clipboard!");
        });
      }

      // Text message link
      const smsMessage = `I got a ${scoreText} on the Rice Purity Test! Check yours here: ${shareURL}`;
      document.getElementById("text-share").href = `sms:?&body=${encodeURIComponent(smsMessage)}`;

      // X (Twitter) share link
      const xLink = `https://twitter.com/intent/tweet?text=${encodeURIComponent(scoreText)}&url=${encodeURIComponent(shareURL)}`;
      document.getElementById("x-share").href = xLink;
    </script>

  </body>
</html>
